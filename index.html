<html>
  <head>
    <title> iPad Test </title>

    <meta name="viewport" content="width=device-width, user-scalable=no">

    <style>
      :root {
        --theme-color: #eee;
      }

      html, body {
        background-color: var(--theme-color);
      }

      .page {
        display: hidden;
      }

      input[type="button"] {
        border: none;
        height: 50px;
        width: 200px;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
      }

      input[type="button"][disabled] {
        color: gray;
        border: ridge 5px;
      }
    </style>

    <link rel="stylesheet" type="text/css" href="custom.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>

  <body>

    

<style>
  #forcelandscape {
    --font-size: 40px;

    z-index: 100; /* in front of everything else */
    text-align: center;
    align-items: center;
    padding-top:calc(50% - var(--font-size) / 2);
    color:red;
    font-size:var(--font-size);
    background-color: white;
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:100%;
  }

  #forcelandscape > div {
    position:relative;
    display:inline-block;
  }
</style>
<div id="forcelandscape" class="page">
  Please rotate your device to landscape mode.
</div>

<style>
  :root {
    --image-distance-from-center: 10px;
    --image-distance-from-side: 10px;
    --bottom-input-height: 0px;

    --img-horiz-position:  calc(50% + var(--image-distance-from-center));
    --img-top-position:    calc(50% + var(--image-distance-from-center) -
                                var(--bottom-input-height) / 2);
    --img-bottom-position: calc(50% + var(--image-distance-from-center) +
                                var(--bottom-input-height) / 2);
  }

  .imgquad > img {
    position: absolute;
    height: calc((100% - var(--bottom-input-height)) / 2  -
                  var(--image-distance-from-side) -
                  var(--image-distance-from-center));
  }

  #quad-page > input {
    width: 10%;
    height: 20%;
    border-top: 30px solid grey;
    border-right: 30px solid  grey;
    border-left: solid #eee;
    border-bottom: solid #eee;
    transform: rotate(45deg);
    /*border-radius: 15%;*/
    position: absolute;
    right: 30;
    bottom: 30;
    -webkit-appearance: none;
    border-radius: 0;

  }


  .topleft-img {
    right: var(--img-horiz-position);
    bottom: var(--img-bottom-position);
  }

  .topright-img {
    left: var(--img-horiz-position);
    bottom: var(--img-bottom-position);
  }

  .bottomleft-img {
    right: var(--img-horiz-position);
    top: var(--img-top-position);
  }

  .bottomright-img {
    left: var(--img-horiz-position);
    top: var(--img-top-position);
  }



</style>

<div class="page" id="quad-page">
  <div id="images" class="imgquad">
    <img id="topleft-img" class="topleft-img" />
    <img id="topright-img" class="topright-img" />
    <img id="bottomleft-img" class="bottomleft-img" />
    <img id="bottomright-img" class="bottomright-img" />
  </div>
  <!-- <input class="exit" type="button" ></input>  -->
</div>




<style>
  #doc-page {
    display: block;
    justify-content: center;

    --form-width: 50%;
  }

  #doc-page > #form-page-center {
    --padding: 25px;

    background-color:white;
    width: var(--form-width);
    margin-left: calc(50% - var(--form-width) / 2 - var(--padding));
    margin-top: 40px;
    padding:var(--padding);
    display: block;
    justify-content: left;
  }

  #doc-page > div {
    justify-content: center;
    display: flex;
    margin-bottom: 15px;
  }

  #doc-page > div > input {
    background-color:#6caba7;
  }

  #doc-page > span {
    position:absolute;
    bottom:10px;
    font-size:20px;
    text-align:center;
    width:100%;
  }
</style>

<div id="doc-page" class="page">
  <div id="form-page-center"> Hello this is a consent form. <br /> <br /> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum<br /><br />Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? </div>
  <div>
    <input class="exit start" type="button" value="Next"></input>
  </div>

  <!-- <input type="button"  id = "skip" value="Skip to end"></input> -->



  <span> Need help or have questions? Call the Learning to Talk Lab at (301) 458-0660 | Learning2Talk@umd.edu</span>
</div>

<style>
#testheadphones-page > input {
  border-radius:10px;
  background-color: rgb(158,206,203);
  position:absolute;
  color: white;
  font-size:25px;
  border-color: rgb(158,206,203);
}

#testheadphones-page > .replay {
  width: 500px;
  height:80px;
  top:55%;
  margin-left: calc(50% - 250px);
}

#testheadphones-page > .exit {
  width: 300px;
  height:80px;
  top:70%;
  margin-left: calc(50% - 150px);
}

#testheadphones-page > input[disabled] {
  background-color: #889c97;
  border-color: #889c97;
}

#testheadphones-page > .info {
 margin-left:15%;
 padding:20px;
 border-radius:10px;
 top:30%;
 color: white;
 font-size: 40px;
 width: 70%;
 background-color:rgb(158,206,203);
 position:absolute;
 text-align:center;
}

</style>

<div id="testheadphones-page" class="page">

  <div class="info">
      Please use headphones to play this game, and make sure youâ€™re in a quiet room.
  </div>

  <input type="button" class="replay" value="Click here to test the sound" />

  <input type="button" class="exit" value="Click here to start!" />
</div>

<style>
  #imgaudio {
    justify-content: center;
    align-items:center;
    height:100%;
  }

  #imgaudio > .center-image {
    height: 80%;
  }

  #imgaudio > * {
    display:block;
    position: relative;
    margin-left: auto;
    margin-right: auto;
    margin-top:20px;
  }

</style>

<div id="imgaudio" class="page">
  <img class="center-image" />
  <input type="button" class="exit" value="Next" />
</div>

<!-- NOTE: Uses styling format from quad -->
<div id="slide7" class="page">
  <div class="imgquad">
    <img class="topleft-img" src="FinalImagesALL/ImgaesforExamples/Boy1_Piano.png" />
    <img class="topright-img" src="FinalImagesALL/ImgaesforExamples/Boy2_3_Paper.png" />
    <img class="bottomleft-img" src="FinalImagesALL/ImgaesforExamples/Girl1_Movie.png" />
    <img class="bottomright-img" src="FinalImagesALL/ImgaesforExamples/Girl2_3_Table.png" />
  </div>
</div>


<!-- COMMENT -->
<style>

#turtlerun-page > * {
  position: relative;
}

#turtlerun-page > img {
  height:60%;
  left:0;
  top:30%;
}

#turtlerun-page > .turtles {
  height:50%;
  width: 600px;
  left: 30%;
  bottom: 0;
  display:block;
  position:absolute;
}

#turtlerun-page > .turtles > img {
  position:relative;
  display:block;
  height:33%;
}

</style>

<div id="turtlerun-page" class="page">
  <img src="FinalImagesALL/ImgaesforExamples/Boy_1_Solo.png" />

  <div class="turtles">
    <img style="left:25%; top:0;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:75%; top:-33%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:0%; top:-33%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:50%; top:-66%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:75%; top:-100%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:25%; top:-100%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
    <img style="left:50%; top:-133%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />

  </div>
</div>

<!-- This is a custom styled page. It shows a bunch of turtles, Jerimiah, and
      an image "let's begin the game" -->

<style>
  #begin-page{
    background-color:white;
    width:100%;
    height:100%;
  }

  #begin-page > * {
    position: absolute;
    display: block;
  }

  #begin-boy1 {
    left:35%;
    top:0%;
    height:70%;
  }

  #begin-text {
    left:20px;
    top:30%;
    width:40%;
  }

  #beginturtle1 {
    top:0;
    right:0;
    width:200px;
  }

  #beginturtle2 {
    bottom:20px;
    right:50%;
    width:200px;
  }

</style>

<div id="begin-page" class="page">
  <img id="begin-boy1" src="FinalImagesALL/ImgaesforExamples/Boy_1_Solo.png">
  <img id="begin-text" src="customImages/beginImage.png">

  <img id="beginturtle1" controls="controls"
    src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />

  <img id="beginturtle2"
    src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
</div>

<style>
#progress-page > .progress {
  height: 15%;
  width: 100%;

  position:absolute;
  bottom: 20px;

  display: flex;
  flex-direction: row;
}

#progress-page > .progress > div {
  height: 100%;
  flex: 1;

  position:relative;
}

#progress-page > .progress > div > *{
  height: 100%;
}

#progress-page > img {
  position: absolute;
}

#progress-page > .progress-img {
  height:50%;
  display:block;

  top:50px;
}

#progress-page > #newitem {
  left: 60%;
  top: 30%;
}

#progress-page > #newitem {
  height: 15%;
}

</style>

<div id="progress-page" class="page">
  <img class="progress-img" />
  <div class="progress-boxes progress">
  </div>
  <div class="progress-items progress">
  </div>

  <img id="newitem" />
</div>



<style>
  #imgpg {
    height:100%;
    width: 100%;
    margin:0;
    padding:0;
  }

  #imgpg > img {
    width:100%;
    margin-top: 10%;;
  }
</style>

<div id="imgpg" class="page">
  <img />
</div>

<div id="movpage" class="page">
  <video width="400" controls autoplay>
    <!-- does not work currently -->
    <source src="customImages/256transparentTurtle.mov">
  </video>
</div>



    <style>

      #end-page > * {
        position: relative;
        text-align: center;
        
      }
      
     
      #end-page > #turtles {
        margin: auto;
        /* height: 10%;
        width: 20%; */
        
      } 
      
       #end-page > #turtles > img {
        /* position:relative; */
        display:inline; 
        width: 150px;
      } 
  
      #end-page > #adult > #continue {
        
        color: white;
        font-size: 20px;
        
        text-align: center;
        background-color:rgb(158,206,203);
        display: block;
        margin: 0 auto;
  
       
        height: 100px;
        width: 300px;
        border-radius: 50%;
      }
  
      
      #end-page > #adult{
          display: table;
          margin: 0 auto;
      }
  
      #end-page > #child{
          display: table;
          margin: 0 auto;
      }
  
  
      #exit {
        background-color: red;
        height: 100px;
        width: 300px;
        border-radius: 50%; 
        display: block;
        margin: 0 auto;
        color: white;
        font-size: 20px; 
      }
  
      #end-page > #over {
        font-size: 400%;
      }

      #participant {
        color: red;
      }
  
      </style>
      
      <div id="end-page" class="page">
        <div id = turtles>
          <img style=" left:75%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" />
          <img style="left:15%;" src="FinalImagesALL/ImgaesforExamples/TurtleTransparent.png" /> 
        </div>
        <h1 id = "over">Game Over!</h1>
        <h2 id = "participant"></h2>
        <div id = "adult">
            <h1>If you are an <mark>adult participant, write down your ID</mark> and click the button below to proceed to the survery.</h1>
            <input id = "continue" class="endpg" type="button" value = "Proceed to Survey" ></input>
       </div>
        
        <div id = "child">
          <h1>If you are a <mark>child participant,</mark> please click here to exit the game.</h1> 
          <input id = "exit"  type="button"value = "Exit Game" ></input>
        </div>
        
      </div>
  

<style>

#chooselist > #lists{
  margin:auto;
  width: 70%;
  left:15%;
  top:10%;
  font-size: 30px;
  padding: 10px 8px 10px 14px;
  background-color: white;
  border: 1px solid black;
  border-radius: 10px;
  overflow: hidden;
  position: absolute;
}

#chooselist > #lists > #options{
  width: 200%;
  background:url('arrow.png') no-repeat;
  background-position:80% center;
}

#chooselist > #lists > #options > select{
  width: 25%;
  font-size: 20px;
  position: absolute;
  left: 15;
  bottom: 60;
}

#chooselist > #lists >#options > input{
    margin-left:15%;
    padding:20px;
    border-radius:10px;
    color: white;
    font-size: 15px;
    width: 15%;
    background-color:rgb(158,206,203);
    text-align:center;
    position: absolute;
    right: 50;
    bottom: 15;
}

#chooselist > span {
    position:absolute;
    bottom:10px;
    font-size:20px;
    text-align:center;
    width:100%;
  }


</style>

<div id="chooselist" class="page">
    <div id = "lists">
        <h2>Choose a List</h2>
        <br><br>
        <div id = "options">
        <select id="scripts" name="scripts">
            <option value="0">List 1</option>
            <option value="1">List 2</option>
            <option value="2">List 3</option>
            <option value="3">List 4</option>
            <option value = "random">Random</option>
        </select>

        <input type="button" class = "exit" value="Select" />

        </div>
    </div>
    
    <span> Need help or have questions? Call the Learning to Talk Lab at (301) 458-0660 | Learning2Talk@umd.edu</span>
</div>
<style>
    #preload, #preload_button {
        
        z-index: 100; /* in front of everything else */
        background-color: white;
        position:absolute;
        top:0;
        left:0; 
        height:100%;
        width:100%;

    }

    #preload > #image_loading, #preload > #audio_loading{
        z-index: inherit;
        font-size: 80px;
        text-align: center;
        align-items: center;
        color:blue;
    }



    #done {
        z-index: inherit;
        align-items: center;
        position: absolute;
        right: 30;
        bottom: 30;
    } 

    #continue{
        z-index: inherit;
        background-color: cadetblue;
        top: 20%;
        height:20%; 
        width: 100%; 
        font-size: 80px;
        /*margin: -20px -50px; */
        position:relative; 
        top:50%; 
        /*left:50%;*/
    }




</style>
<div id = preload_button>
    <input type="button" id = "continue" value="Load Game" />
</div>
<div id="preload" class="page">
    <p id = "image_loading">Game Loading ...</p>
    <p id = "audio_loading"></p>
    <input type="button" id = "done" value="Continue" /> 
</div>
<style>
#audiobody {
  background-color: white;
  border-radius:5px;
  padding:10px;
  margin:10px;
}

#audiobutton {
  border-radius: 4px;
  background-color: #6caba7;
  padding:10px;
  margin:40px;
}

.likert > li {
  display:inline-block;
  text-align:center;
  padding: 10px;
}

#audiocontinue {
  border-radius: 4px;
  background-color: #6caba7;
  text-align: center;
}

#audioquestion {
  text-align:center;
}

#audiomain {
  text-align:left;
  width:60%;
  left:20%;
  position:absolute;
}

.likert {
  text-align:center;
}

#audiolikertnext {
  text-align:right;
}

.likert > li {
  border-radius:4px;
  padding:5px;
  margin-top:5px;
  border:1px solid gray;
}

</style>

<div id="audioquestion" class="page">
  <div id="audiomain">
    <div style="text-align:center"><i>progress (<span id="prognum"></span>%)</i><br /><div style="margin:auto; width:108px; height:20px; border-style:solid; padding:4px"><div id="bluebar" style="background-color:blue;height:100%;"></div></div>
    <div id="audiobody" style="text-align:center"><h3>Please play the audio clip and answer the follow questions</h3></div>
    <div style="text-align:center; width:100%;">
      <input type="button" id="audiobutton" bgcolor="white" value="Play Audio"></input>
    </div>

    <div id="audiolikertQ1">
      <div id="audiobody">How often do you hear family or friends speak in a similar way?</div>
      <ul id="audiolikert1" class="likert">
        <li><input type="radio" name="likert1" value="1" /><br /> I've never heard </li>
        <li><input type="radio" name="likert1" value="2" /><br /> Sometimes </li>
        <li><input type="radio" name="likert1" value="3" /><br /> Hear this all the time</li>
        <li><input type="radio" name="likert1" value="4" /><br /> Unsure</li>
        <li><input type="radio" name="likert1" value="5" /><br /> Don't want to answer</li>
      </ul>
    </div>

    <div id="audiolikertQ2">
      <div id="audiobody">How often do you speak in a manner similar to the sentence you just heard?</div>
      <ul id="audiolikert2" class="likert">
        <li><input type="radio" name="likert2" value="1" /><br /> I never say this </li>
        <li><input type="radio" name="likert2" value="2" /><br /> Only with families and friends</li>
        <li><input type="radio" name="likert2" value="3" /><br /> All the time</li>
        <li><input type="radio" name="likert2" value="4" /><br /> Unsure</li>
        <li><input type="radio" name="likert2" value="5" /><br /> Don't want to answer</li>
      </ul>
    </div>

    <div id="audiolikertnext">
      <input type="button" id="audiocontinue" value="Continue"></input>
    </div>
  </div>
</div>

<style>

#email{

    /* margin: 0 auto;
    width: 75%;
    padding: 50px;
    text-align: center; */
    
    
    border: 1px solid black;
      position:absolute;
      text-align: center;
      width: 80%;
      height: 50%;
      left:10%;
      top:10%;
      margin: auto;
      background-color: white;

}

#skip {
    margin-left:80%;
    margin-top: 20%;
    width: 5%;
    height: 10%;
    border-top: 15px solid rgb(158,206,203);
    border-right: 15px solid rgb(158,206,203);;
    border-left: 0px solid white;
    border-bottom: 0px solid white;
    background-color: white; 
    transform: rotate(45deg);
    /*border-radius: 15%;*/
    position: absolute;
    /* right: 30;
    bottom: 30; */
    -webkit-appearance: none;
    border-radius: 0;

  }

  #enter_email
{
    font-size:16pt;
    min-height:50px;
    min-width: 100px;
}

#enter {
  border-color: black;
  background-color: rgb(158,206,203);;
}


  #skipping_div {
    position: fixed;
    left: 50%;
    bottom: 40px;
    transform: translate(-50%, -50%);
    margin: 0 auto;
  }
      
</style>
     
      <div id="emailpage" class="page">
        <div>
            <div id = "email">
                <h1>If you are an <mark>adult participant</mark>, please enter your email in the box below. Your email will be used to contact you for compensation.</h1>
        
                <input type="text" id = "enter_email" />
                <input type="button" id = "enter" value = "Enter" class = "exit" />
                <br>
                <h1><mark>If you are a parent of a child particpant, skip this page.</mark></h1> 
                </div>
            </div>
            <input type="button" id = "skip" class = "exit" />
        </div>
      </div>
      
<style>

#multibody {
  background-color: white;
  border-radius:5px;
  padding-left:10px;
  padding-right:10px;
  padding-top:4px;
  padding-bottom:4px;
  margin:10px;
}

#multichoices {
  text-align:center;
}

#multi > li {
  display:inline-block;
  text-align:center;
  padding: 10px;

  border-radius:4px;
  margin:5px;
  border:1px solid gray;
}

#multicontinue {
  background-color: #6caba7;
  text-align:center;
}

#multimain {
  width:60%;
  left:20%;
  position:absolute;
}

#multinext {
  text-align:right;
}

</style>

<div id="multichoice" class="page">
  <div id="multimain">
    <div id="multibody"></div>

    <div id="multichoices">
      <ul id="multi" class="multi">

      </ul>
    </div>

    <div id="multinext">
      <input type="button" id="multicontinue" value="Continue"></input>
    </div>
  </div>
</div>

<style>

.dialectbody {
  background-color: white;
  border-radius:5px;
  padding-left:10px;
  padding-right:10px;
  padding-top:4px;
  padding-bottom:4px;
  margin:10px;
}

.dialectchoices {
  text-align:center;
}

.dialect > li {
  display:inline-block;
  text-align:center;
  padding: 10px;

  border-radius:4px;
  margin:5px;
  border:1px solid gray;
}

#dialectcontinue {
  background-color: #6caba7;
  text-align:center;
}

#dialectmain {
  width:60%;
  left:20%;
  position:absolute;
}

#dialectnext {
  text-align:right;
}

</style>

<div id="dialect" class="page">
  <div id="dialectmain">
    <div class="dialectbody">Thank you for listening to samples of dialect <span class="dialectname"></span>. Please answer the following questions to the best of your abilities:</div>
    <div class="dialectbody">Do you use <span class="dialectname"></span>?</div>
    <div class="dialectchoices">
      <ul class="dialect">
        <li><input type="radio" name="dialect_yn" value="Yes" /><br />Yes</li>
        <li><input type="radio" name="dialect_yn" value="No" /><br />No</li>
      </ul>
    </div>

    <div class="dialectbody">How often do you use <span class="dialectname">2</span>?</div>
    <div class="dialectchoices">
      <ul class="dialect">
        <li><input type="radio" name="dialect_how_often" value="Never" /><br />Never</li>
        <li><input type="radio" name="dialect_how_often" value="Rarely" /><br />Rarely</li>
        <li><input type="radio" name="dialect_how_often" value="Sometimes" /><br />Often</li>
        <li><input type="radio" name="dialect_how_often" value="Often" /><br />Sometimes</li>
        <li><input type="radio" name="dialect_how_often" value="Always" /><br />Always</li>
      </ul>
    </div>

    <div class="dialectbody">How many of your friends use <span class="dialectname">2</span>?</div>
    <div class="dialectchoices">
      <ul class="dialect">
        <li><input type="radio" name="dialect_friends" value="None" /><br />None</li>
        <li><input type="radio" name="dialect_friends" value="Some" /><br />Some</li>
        <li><input type="radio" name="dialect_friends" value="Most" /><br />Most</li>
        <li><input type="radio" name="dialect_friends" value="All" /><br />All</li>
      </ul>
    </div>

    <div class="dialectbody">How many of your immediate family members (parents, brother(s), sister(s), and children) use <span class="dialectname">2</span>?</div>
    <div class="dialectchoices">
      <ul class="dialect">
        <li><input type="radio" name="dialect_family" value="None" /><br />None</li>
        <li><input type="radio" name="dialect_family" value="Some" /><br />Some</li>
        <li><input type="radio" name="dialect_family" value="Most" /><br />Most</li>
        <li><input type="radio" name="dialect_family" value="All" /><br />All</li>
      </ul>
    </div>

    <div class="dialectbody">Do you have any more comments about your experience with different dialects of English?</div>
    <div class="dialectchoices">
      <textarea id="dialect_info"></textarea>
    </div>

    <div id="dialectnext">
      <input type="button" class="exit" id="dialectcontinue" value="Continue"></input>
    </div>
  </div>
</div>

<style>

input[type="radio"] {
  cursor: pointer;
}

.demogbody {
  background-color: white;
  border-radius:5px;
  padding-left:10px;
  padding-right:10px;
  padding-top:4px;
  padding-bottom:4px;
  margin:10px;
}

.demogchoices {
  text-align:center;
}

.demog > li {
  display:inline-block;
  text-align:center;
  padding: 10px;

  border-radius:4px;
  margin:5px;
  border:1px solid gray;
}

#demogcontinue {
  background-color: #6caba7;
  text-align:center;
}

#demogmain {
  width:60%;
  left:20%;
  position:absolute;
}

#demognext {
  text-align:right;
}

</style>

<div id="demog" class="page">
  <div id="demogmain">
    <div class="demogbody">How would you describe your gender?</div>
    <div class="demogchoices">
      <ul class="demog">
        <li><input type="radio" name="demog_gender" value="Male" /><br />Male (including transgender men)</li>
        <li><input type="radio" name="demog_gender" value="Female" /><br />Female (including transgender women)</li>
        <li><input type="radio" name="demog_gender" value="Self-Describe" /><br />Prefer to self-describe as <input type="text" id="gender_custom" /><br /> (non-binary, gender-fluid, agender, please specify)</li>
        <li><input type="radio" name="demog_gender" value="Prefer not to say" /><br />Prefer not to say</li>
      </ul>
    </div>

    <div class="demogbody">Age</div>
    <div class="demogchoices">
      <input type="number" id="demog_age" />
    </div>

    <div class="demogbody">Zip Code of where you grew up <br /><i>If you lived in multiple places, pick the one that you find most representative.</i></div>
    <div class="demogchoices">
      <input type="number" id="demog_zip" />
    </div>


    <div class="demogbody">Ethnicity</div>
    <div class="demogchoices">
      <ul class="demog">
        <li><input type="radio" name="demog_ethnicity" value="Hispanic" /><br />Hispanic</li>
        <li><input type="radio" name="demog_ethnicity" value="Non-Hispanic" /><br />Non-Hispanic</li>
      </ul>
    </div>

    <div class="demogbody">Race (check all that apply)</div>
    <div class="demogchoices">
      <ul class="demog">
        <li><input type="checkbox" name="demog_race" value="American Indian/Alaska native" /><br />American Indian/Alaska native</li>
        <li><input type="checkbox" name="demog_race" value="Asian" /><br />Asian</li>
        <li><input type="checkbox" name="demog_race" value="Native Hawaiian or Other Pacific Islander" /><br />Native Hawaiian or Other Pacific Islander</li>
        <li><input type="checkbox" name="demog_race" value="Black or African American" /><br />Black or African American</li>
        <li><input type="checkbox" name="demog_race" value="More than one race" /><br />More than one race</li>
        <li><input type="checkbox" name="demog_race" value="Unknown" /><br />Unknown</li>
        <li><input type="checkbox" name="demog_race" value="Do not wish to report" /><br />Do not wish to report</li>
      </ul>
    </div>

    <div class="demogbody">Name of University</div>
    <div class="demogchoices">
      <input type="text" id="demog_university" />
    </div>

    <div class="demogbody">Year in College</div>
    <div class="demogchoices">
      <ul class="demog">
        <li><input type="radio" name="demog_year" value="Freshman" /><br />Freshman</li>
        <li><input type="radio" name="demog_year" value="Sophomore" /><br />Sophomore</li>
        <li><input type="radio" name="demog_year" value="Junior" /><br />Junior</li>
        <li><input type="radio" name="demog_year" value="Senior" /><br />Senior</li>
      </ul>
    </div>

    <div class="demogbody">Please list your parents' country/countries of origin</div>
    <div class="demogchoices">
      <input type="text" id="demog_countries"></input>
    </div>

    <div id="demognext">
      <input type="button" class="exit" id="demogcontinue" value="Continue"></input>
    </div>
  </div>
</div>

<style>

    
    #welcomeexp {

      border: 1px solid black;
      position:absolute;
      text-align: center;
      width: 80%;
      height: 85%;
      left:10%;
      top:10%;
      margin: auto;
      background-color: white;
    }

    
   


    #welcomeexp > #adult_par > #gotoAdultPage {
      
      color: white;
      font-size: 20px;
      
      text-align: center;
      background-color:rgb(158,206,203);;
      display: block;
      margin: 0 auto;

     
      height: 100px;
      width: 300px;
      border-radius: 50%;
    }

    #welcomeexp > #game > #gotoGame {
      
      color: white;
      font-size: 20px;
      
      text-align: center;
      background-color:rgb(158,206,203);
      display: block;
      margin: 0 auto;

     
      height: 100px;
      width: 300px;
      border-radius: 50%;
    }

    
    #welcomeexp > #adult_par{
        display: table;
        margin: 0 auto;
    }

    #welcomeexp > #game{
        display: table;
        margin: 0 auto;
    }




    #welcomeexp > #welcome {
      font-size: 400%;
    }

 

    </style>
    
    <div id="welcomeexp" class="page">
      <h1 id = "welcome">Welcome to the Great Terp Rescue!</h1>
      <div id = "game">
          <h1>If you are a parent of a child participant click here to start the game:</h1>
          <input id = "gotoGame" class="endpg" type="button" value = "Start Game" ></input>
     </div>
      
      <div id = "adult_par">
        <h1>If you are an adult participant please click here to start:</h1> 
        <input id = "gotoAdultPage"  type="button"value = "Start" ></input>
      </div>
      
    </div>
<style>

#welcomesurvey {
  
  border: 1px solid black;
  position:absolute;
  text-align: center;
  width: 75%;
  height: 75%;
  left:15%;
  top:10%;
  margin: auto;
  background-color: white;
}
#welcomesurvey > #cont {
  margin-left: 15%;
  border-color: black;
  background-color: rgb(158,206,203);
  position: absolute;
  right: 50;
  bottom: 15;
}

#surveyWelcome {
  font-size: 400%;
  text-align:center;
}

.entries{
  font-size: 200%;
}
</style>
<div id="welcomesurvey" class="page">


    <h1 id = "surveyWelcome">Welcome to the Survey!</h1>

    <h2 class = "entries" >Please enter your email below</h2>
    <input type="text" id = "enter_email2" />

    <h2 class = "entries">Please enter your Participant ID below</h2>
    <input type="text" id = "enter_id" />

    <br>

    <input id = "cont" class="exit" type="button" value = "Continue" ></input>

    
  </div>
<style>

    
    #welcomeadult {

      border: 1px solid black;
      position:absolute;
      text-align: center;
      width: 80%;
      height: 85%;
      left:10%;
      top:10%;
      margin: auto;
      background-color: white;
    }

    
   


    #welcomeadult > #survey > #gotoSurvey {
      
      color: white;
      font-size: 20px;
      
      text-align: center;
      background-color:rgb(158,206,203);;
      display: block;
      margin: 0 auto;

     
      height: 100px;
      width: 300px;
      border-radius: 50%;
    }

    #welcomeadult > #greatescape > #startGame {
      
      color: white;
      font-size: 20px;
      
      text-align: center;
      background-color:rgb(158,206,203);
      display: block;
      margin: 0 auto;

     
      height: 100px;
      width: 300px;
      border-radius: 50%;
    }

    
    #welcomeadult > #survey{
        display: table;
        margin: 0 auto;
    }

    #welcomeadult > #greatescape{
        display: table;
        margin: 0 auto;
    }




    #welcomeadult > #info {
      font-size: 200%;
    }

 

    </style>
    
    <div id="welcomeadult" class="page">
      <h1 id = "info">First, complete the Great Terp Rescue game. This will take about 10 minutes to complete. At the end of the game, you will see a button that takes you to the survey portion of this task. The survey will take about 30 minutes to complete.
      </h1>
      <div id = "greatescape">
          <h1>Click here to start the Great Terp Rescue:</h1>
          <input id = "startGame" class="endpg" type="button" value = "Start Game" ></input>
     </div>
      
      <div id = "survey">
        <h1>If you are returning to this link to complete the survey, click here to start the survey:</h1> 
        <input id = "gotoSurvey"  type="button"value = "Start Survey" ></input>
      </div>
      
    </div>
<div id="sendsurvey" class="page">
    <h1 id = "sendingdata">Sending Data</h1>
</div>
<div id="sendgame" class="page">
    <h1 id = "sendingdatagame">Sending Data</h1>
</div>

<style>
#end_survey {
  
    border: 1px solid black;
    position:absolute;
    text-align: center;
    width: 75%;
    height: 50%;
    left:15%;
    top:10%;
    font-size: 150%;
    margin: auto;
    background-color: white;
  }
</style>

<div id="end_survey" class="page">
    <h1>Thank you for your participation!</h1>
    <br>
    <h1>Our research team will contact you via email about compensation.</h1>
</div>
<style>

.langbody {
  background-color: white;
  border-radius:5px;
  padding-left:10px;
  padding-right:10px;
  padding-top:4px;
  padding-bottom:4px;
  margin:10px;
}

.langchoices {
  text-align:center;
}

.lang > li {
  display:inline-block;
  text-align:center;
  padding: 10px;

  border-radius:4px;
  margin:5px;
  border:1px solid gray;
}

#langcontinue {
  background-color: #6caba7;
  text-align:center;
}

#langmain {
  width:60%;
  left:20%;
  position:absolute;
}

#langnext {
  text-align:right;
}

</style>

<div id="lang" class="page">
  <div id="langmain">

    <div class="langbody"><strong>What language(s) are you proficient in? For each language, please rate your proficiency.</strong></div>
    <br />
    <div>
      Language: <input type="text" id="lang1"></input>
    </div>


    <div class="langbody">Please rate your proficiency:</div>
    <div class="langchoices">
      <ul class="lang">
        <li><input type="radio" name="lang1_proficiency" value="Fluent" /><br />Fluent</li>
        <li><input type="radio" name="lang1_proficiency" value="Speak a few words" /><br />Can speak a few words</li>
        <li><input type="radio" name="lang1_proficiency" value="Understand a few words" /><br />Can understand a few words</li>
        <li><input type="radio" name="lang1_proficiency" value="comprehend, not speak" /><br />I don't fluently speak, but can comprehend</li>
      </ul>
    </div>

    <br />
    <br />

    <div>
      Language: <input type="text" id="lang2"></input>
    </div>

    <div class="langbody">Please rate your proficiency:</div>
    <div class="langchoices">
      <ul class="lang">
        <li><input type="radio" name="lang2_proficiency" value="Fluent" /><br />Fluent</li>
        <li><input type="radio" name="lang2_proficiency" value="Speak a few words" /><br />Can speak a few words</li>
        <li><input type="radio" name="lang2_proficiency" value="Understand a few words" /><br />Can understand a few words</li>
        <li><input type="radio" name="lang2_proficiency" value="comprehend, not speak" /><br />I don't fluently speak, but can comprehend</li>
      </ul>
    </div>

    <br />
    <br />

    <div>
      Language: <input type="text" id="lang3"></input>
    </div>

    <div class="langbody">Please rate your proficiency:</div>
    <div class="langchoices">
      <ul class="lang">
        <li><input type="radio" name="lang3_proficiency" value="Fluent" /><br />Fluent</li>
        <li><input type="radio" name="lang3_proficiency" value="Speak a few words" /><br />Can speak a few words</li>
        <li><input type="radio" name="lang3_proficiency" value="Understand a few words" /><br />Can understand a few words</li>
        <li><input type="radio" name="lang3_proficiency" value="comprehend, not speak" /><br />I don't fluently speak, but can comprehend</li>
      </ul>
    </div>

    <div id="langnext">
      <input type="button" class="exit" id="langcontinue" value="Continue"></input>
    </div>
  </div>
</div>

    <script src="pouchdb-7.2.1.min.js"></script>
    <script src="pages1.js"></script>

    <script>// This is the Fisher-Yates shuffle
// Taken from https://bost.ocks.org/mike/shuffle/
function shuffle(array) {
  var m = array.length, t, i;

  // While there remain elements to shuffleâ€¦
  while (m) {

    // Pick a remaining elementâ€¦
    i = Math.floor(Math.random() * m--);

    // And swap it with the current element.
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }

  return array;
}

// takes two lists of equal length
//  list is anything
//  arrangement is a shuffling of range(0, len(arrangement))
function reorder(list, arrangement) {
  var o = [];

  for(var i=0; i< arrangement.length; i++) {
    o.push(list[arrangement[i]])
  }

  return o;
}

class AudioAtlas {
  constructor(atlasObject) {
      this.file = atlasObject.file;
      this.locations = atlasObject.locations;

      this.audioend = 0;
      this.pausing = false;
      this.afterfunction = function(){};

      this.audio = new Audio(this.file);
      this.audio.addEventListener("canplaythrough", function() {
        if (!this.loaded) {
          this.loaded = true;
          this.audio.pause();
          console.log("canplaythrough");

          audio_loaded.i = true;
        }
      }.bind(this));

      this.audio.addEventListener('timeupdate', function() {
        if (this.audio.currentTime >= this.audioend) {
          if (!this.pausing) {
            this.audio.pause();
            this.pausing = true;
            console.log("pausing");
            this.afterfunction(); // double check that this is only run once
          }
        }
      }.bind(this), false);

      this.audio.addEventListener('stalled', function() {
        if (this.audio.currentTime >= this.audioend) {
          alert("Audio is not loading. Please check internet connection. Reloading now.");

          this.audio.load();
          this.audio.pause();
        }
      }.bind(this), false);

      this.loaded = false;
  }

  playFile(name) {
    if (name in this.locations) {
      this.playTime(this.locations[name].start, this.locations[name].length);
    } else {
      console.log(`FILE ${name} not available in atlas`);
    }
  }

  playTime(start, length) {
    if (this.loaded) {
      this.audio.currentTime = start;

      console.log(`Start: ${start}\nEnd:${start+length}`);

      this.audioend = start+length;
      this.audio.play();
      this.pausing = false;
    } else {
      console.log("CANNOT play audio because it is unloaded.");
    }
  }

  initialize() {
    if (!this.loaded) {
      this.audio.play();
    }
  }

  paused() {
    return this.audio.paused;
  }

  pause() {
    this.audioend = 0;
  }
}

_global_audio = undefined;
$(window).on("load", function() {
  _global_audio = new AudioAtlas(_global_audio_object);
});

$("input").bind("click touch", function() {
  _global_audio.initialize();
});


function play_audio(file, afterfunction) {
  _global_audio.pause();
  if (file == undefined) {
    console.log("NO LOAD");

    afterfunction();
  } else {
    _global_audio.afterfunction = afterfunction;

    _global_audio.playFile(file);
    }
}

class AudioPage extends Page {
  constructor(pageID, audio, delay) {
    super(pageID);

    this.audiofile = audio;
    this.delay = delay;
  }

  after_audio() {}

  play_audio() {
    play_audio(this.audiofile, function() {
        (this.after_audio.bind(this))();
    }.bind(this));
  }

  play() {
    this.setTimeout(this.play_audio.bind(this), this.delay);
  }

  deactivate() {
    super.deactivate();
    _global_audio.pause();
  }
}

// note that this does not act like a normal page

function forceLandscape(){
  if ($(window).width() > $(window).height()) {
    $("#forcelandscape").hide();
  } else {
    $("#forcelandscape").show();
  }
}

$(window).on("resize",forceLandscape);

$(window).on("load", forceLandscape);

// This stores 4 images, and plays audio. Once the audio is played, one image
// must be tapped on, and that image is logged. There is also a replay button,
// which plays the audio again
let img_order = ["topleft", "topright", "bottomleft", "bottomright"];

// These are defined to minimize re-typing
var imgSourceDirectory = "";
var audioSourceDirectory = "";

// Choice
// A choice has a name and an image
// it is in the OptionPage
class Choice {
  constructor(label, image) {
    this.label = label;
    this.image = imgSourceDirectory + image;
  }
}

class QuadPage extends AudioPage {
  constructor(pageID, audio, choices, showdelay) {
    if (showdelay === undefined) { showdelay = 500; }

    super(pageID, audioSourceDirectory+audio, showdelay + 3000);

    this.showdelay = showdelay;

    this.choices = [];

    this.choices.push(choices.find(e => e.image.match(/Boy/) && e.image.match(/1/)));
    this.choices.push(choices.find(e => e.image.match(/Boy/) && e.image.match(/2_3/)));
    this.choices.push(choices.find(e => e.image.match(/Girl/) && e.image.match(/1/)));
    this.choices.push(choices.find(e => e.image.match(/Girl/) && e.image.match(/2_3/)));

    this.targetQuadrant = -1;
    this.audioStopTime = 0;
  }

  select_option(e) {
    if (_global_audio.paused) {//only run if no audio playing
      //var dt = (new Date()).getTime() - this.audioStopTime;
      new_datum($(e.target).data("quad"), this.audioStopTime, (new Date()).getTime() );

      //

      // if (globalBook.current_page == globalBook.pages.length - 3){
      //   addData(logged_data);
      // }
      
      //

      globalBook.nextpage();
    }
  }

  after_audio() {
    $("img").unbind('click touch');//ensure it doesnt get double called
    $("img").bind('click touch', this.select_option.bind(this));
    this.audioStopTime = (new Date()).getTime();
    $("#quad-page > input").removeAttr("disabled");
  }

  play_audio() {
    super.play_audio();
  }

  play() {
    super.play();
    $("#images > img").data("isTarget", "C");
   
    for (var i=0; i<4; i++) {
      if (this.choices[i] != undefined) {
        $(`#${img_order[i]}-img`).attr("src", this.choices[i].image);
        $(`#${img_order[i]}-img`).data("id", this.choices[i].label);
        $(`#${img_order[i]}-img`).data("quad", i); // This doesnt need to be
                                                   // set every time, but not
                                                   // that important to optimize
        if (this.choices[i].label == "T") {
          this.targetQuadrant = i;
        }
      } else {
        $(`#${img_order[i]}-img`).attr("src", "");
        $(`#${img_order[i]}-img`).data("id", "undefined");
      }
    }
    
    this.setTimeout(function(){$("#quad-page > input.exit").attr("disabled", "disabled");$("#quad-page").show()}, this.showdelay);
  }

  deactivate() {
    super.deactivate();

    $("img").unbind("click touch");
    $("#quad-page").hide();
  }
}

class DocPage extends AudioPage {
  constructor(pid, text, width_str, fontsize, buttontext, audio) {
    super(pid, audio, 400);

    this.text = text;
    this.width = width_str;
    this.fontsize = fontsize;

    this.buttontext = buttontext;
  }

  after_audio() {
    $("#doc-page > div > input").removeAttr("disabled");
  }



  play() {
    super.play();
    $("#doc-page").css("--form-width", this.width)
    $("#doc-page > #form-page-center").html(this.text)
    $("#doc-page > #form-page-center").css("font-size", this.fontsize)

    $("#doc-page > div > input ").attr("value", this.buttontext)

    $("#doc-page > div > input").attr("disabled", "disabled")

    $("#doc-page").show();
  }

  deactivate() {
    super.deactivate();

    $("#doc-page").hide();
  }
}


// $("#skip").bind("click touch", function() {
//   console.log("helo");
//   globalBook.pages[globalBook.current_page].deactivate();
//   globalBook.current_page = globalBook.pages.length - 3;
//   globalBook.pages[globalBook.current_page].play();
// });

// Modified from https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices
function getAudioDevices() {
  if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
    console.log("enumerateDevices() not supported.");
    return;
  }

  var devices = navigator.mediaDevices.enumerateDevices();

  return devices.filter(device => device.type == "audiooutput");
}

// TODO TEST HOW TO TELL IF HEADPHONES EXIST
function getHeadphones() {
  audios = getAudioDevices();
}

class TestHeadphonesPage extends AudioPage {
  constructor(pageID) {
    super(pageID, "WAVFiles/Introduction_Instructions/Slide4_WearHeadphones.wav", 0);
  }

  after_audio() {
    $("#testheadphones-page > input").removeAttr("disabled");
  }

  play() {
    $(".replay").on('click touch', function() {
      this.play_audio();
    }.bind(this));

    $("#testheadphones-page > input.exit").attr("disabled", "disabled");
    $("#testheadphones-page").show();
    super.play();
  }

  deactivate() {
    super.deactivate();

    $("#testheadphones-page").hide();
  }
}

class ImgAudioPage extends AudioPage {
  constructor(pageID, imagefile, audiofile) {
    super(pageID, audiofile, 0);

    this.image = imagefile;
  }

  after_audio() {
    $("#imgaudio > input").removeAttr("disabled")
  }

  play() {
    super.play();
    $("#imgaudio > img").attr("src", this.image)
    $("#imgaudio").show();
    $("#imgaudio > input").attr("disabled", "disabled");
  }

  deactivate () {
    super.deactivate();
    $("#imgaudio").hide();
  }
}

class Slide7Page extends AudioPage {
  constructor(pid) {
    var pid = "slide7";
    var audio = "WAVFiles/Introduction_Instructions/Slide6_IntroToNames.wav";
    var delay = 500;
    super(pid, audio, delay);

    this.delay = delay;

    this.growIndexes = [0,2,1,3];
    this.growTimestamps = [8000, 18500, 27800, 36700];

  }

  grow(index) {
    console.log(index);
    var imgpos = "#slide7 > .imgquad > .";
    var imgname = imgpos + img_order[index] + "-img";
    console.log(imgname);

    // save the current offset for later;
    var offset = $(imgname).offset();
    var height = $(imgname).height();

    // shows up in front of other values
    $(imgname).css("zIndex", 2);

    $(imgname).animate({
      height: "70%",
      top: "15%",
      left: "25%",
    }, 2000, function() {
      console.log("Done with first animation!");
      this.setTimeout(function() {
        $(imgname).animate({
          height: height,
          "z-index": 1,
          top: offset.top,
          left: offset.left,
        }, 2000, function() {
          $(imgname).removeAttr("height");
          $(imgname).css("zIndex", 1);
        });
      }, 1000);
    }.bind(this));
  }

  after_audio () {
    globalBook.nextpage();
  }

  play() {
    $("#slide7").show();
    super.play();

    for(var i=0; i<this.growIndexes.length; i++) {
      let ind = this.growIndexes[i];
      this.setTimeout(
        function () {
          this.grow(ind)
        }.bind(this),
        this.growTimestamps[i] + this.delay);
    }

    console.log(this.audiofile);
  }

  deactivate() {
    super.deactivate();
    $("#slide7").hide();
  }
}

class LearnQuadPage extends QuadPage {
  constructor(pid, images, audio, target_index,
              correct_feedback_audio, incorrect_feedback_audio, replay_audio) {
    super(pid, audio, images, 0);

    this.replay_audio = replay_audio;

    var orig = "WAVFiles/Reinforcement/"
    this.rewardAudio = orig + correct_feedback_audio;
    this.wrongAudio = orig + incorrect_feedback_audio;

    this.clickready = false;
  }

  correct_choice(e) {
    // var dt = (new Date()).getTime() - this.audioStopTime;
    // new_datum($(e.target).data("quad"),
    //           dt);
    new_datum($(e.target).data("quad"), this.audioStopTime, (new Date()).getTime() );
    play_audio(this.rewardAudio, function(){globalBook.nextpage();});
    this.clickready = false;

    // var dt = (new Date()).getTime() - this.audioStopTime;
    // new_datum($(e.target).data("quad"),
    //           dt);

  }

  wrong_choice(e) {
    if (this.replay_audio) {
      play_audio(this.wrongAudio, this.play_audio.bind(this));
    } else {
      play_audio(this.wrongAudio, this.after_audio.bind(this) );
    }

    this.clickready = false;

    // var dt = (new Date()).getTime() - this.audioStopTime;
    // new_datum($(e.target).data("quad"),
    //           dt);
    new_datum($(e.target).data("quad"), this.audioStopTime, (new Date()).getTime() );
  }

  select_option(e) {
    if (_global_audio.paused && this.clickready) {
      if ($(e.target).data("isTarget") == "T") {
        this.correct_choice(e);
      } else {
        this.wrong_choice(e);
      }
    }
  }

  after_audio() {
    super.after_audio();
    this.clickready = true;
  }

  play() {
    super.play();
    var targetImageName = "." + img_order[this.targetQuadrant] + "-img";

    $("#images > img").data("isTarget", "C");
    $("#images > " + targetImageName).data("isTarget", "T");
  }

  deactivate() {
    super.deactivate();
    $("#images > img").removeData("isTarget");
  }
}

class TurtleRunPage extends AudioPage {
  constructor() {
    super("turtles run away", "WAVFiles/Introduction_Instructions/Slide5_StoryIntro.wav", 300);

    this.time_to_run = 7000;
  }

  after_audio() {
    globalBook.nextpage();
  }

  play() {
    $("#turtlerun-page").show();

    this.setTimeout(function(){
      $("#turtlerun-page > .turtles").animate({
        opacity: 0
      }, 2500);
    }, this.time_to_run);

    this.setInterval(
      function() {
        turtledance(".turtles > img");
      }, 5000, true);

    super.play();
  }

  deactivate() {
    $("#turtlerun-page").hide();

    super.deactivate();
    $("#turtlerun-page > .turtles").css("left","40%")
    $("#turtlerun-page > .turtles").css("bottom","0")

  }
}

class BeginPage extends AudioPage {
  constructor(audio) {
    super("begin", audio, 500);
  }

  after_audio() {
    globalBook.nextpage();
  }

  play() {
    super.play();

    this.setInterval(
      function() {
        turtledance("#beginturtle1");
      }, 5000, true);

    this.setTimeout(function() {
      this.setInterval(function() {
        turtledance("#beginturtle2")
      }, 5000, true);
    }.bind(this), 100);

    $("#begin-page").show();
  }

  deactivate() {
    super.deactivate();
    $("#begin-page").hide();
  }
}

// todo create audiopage which other pages are based on
class ProgressPage extends AudioPage {
  constructor(pageID, number, total, progressImage, emptyImage, mainImage, audiofile) {
    super(pageID, audiofile, 400);

    this.number = number;
    this.total = total;

    this.progressImage = progressImage;
    this.emptyImage = emptyImage;
    this.mainImage = mainImage;
  }

  after_audio() {
    globalBook.nextpage();
  }

  play() {
    $("#progress-page > .progress-img").attr("src", this.mainImage);

    for(var i=0; i<this.total; i++) {
      $("#progress-page > .progress-boxes").append(`<div><img src="${this.emptyImage}" /><div>`);
    }

    for(var i=0; i<this.number-1; i++) {
      $("#progress-page > .progress-items").append(`<div><img src="${this.progressImage}" /></div>`);
    }

    for(var i=this.number-1; i<this.total; i++) {
      $("#progress-page > .progress-items").append(`<div></div>`);
    }

    $("#newitem").attr("src", this.progressImage);

    $("#progress-page").show();

    this.setTimeout(function() {
      var xpos = $(".progress-items > div")[this.number-1].offsetLeft;
      var ypos = $(".progress-items")[0].offsetTop;

      $("#newitem").animate({
        left: xpos,
        top: ypos
      }, {
        duration: 2500,
        queue: false
      });
    }.bind(this), 1000);

    this.setInterval(
      function() {
        turtledance(".progress-items > div");
        turtledance("#newitem");
      }, 5000, true);

    super.play();
  }

  deactivate() {
    super.deactivate();

    $("#progress-page").hide();
    $("#progress-page > .progress-boxes").html("");
    $("#progress-page > .progress-items").html("");
    $("#progress-page > img#newitem").attr("src", "");
    $("#newitem").css("left", "60%");
    $("#newitem").css("top", "30%");
  }
}

// just plays the audio, not interactive
class QuadAudioPage extends QuadPage {
  constructor(pageID, audio, choices) {
    super(pageID, audio, choices, 0);
  }

  after_audio() {
    globalBook.nextpage();
  }

  play() {
    super.play();
  }

  deactivate() {
    super.deactivate();
  }
}

class ImagePage extends Page {
  constructor(name, image, delay) {
    super(name);
    this.image = image;
    this.delay = delay;
  }

  play() {
    super.play();
    $("#imgpg > img").attr("src", this.image);
    $("#imgpg").show();

    this.setTimeout(function() {
      globalBook.nextpage();
    }, this.delay);
  }

  deactivate() {
    super.deactivate();
    $("#imgpg").hide();
  }
}

function turtledance(turtlename) {
  var danceposes = [[ 30, 2000],
                    [-30, 1000],
                    [ 30, 1000],
                    [  0, 1000]];

  for (var i=0; i<danceposes.length; i++) {
    $(turtlename).animate({
      deg: danceposes[i][0]
    }, {
      duration: danceposes[i][1],
      step: function(cur) {
          $(turtlename).css({
            "WebkitTransform": "rotate("+cur+"deg)",
            "-moz-transform": "rotate("+cur+"deg)",
            "transform": "rotate("+cur+"deg)"})
      }});
  }
}

class MovPage extends Page {
  constructor() {
    super("mov");
  }

  play() {
    $("#movpage").show();
  }

  deactivate() {
    super.deactivate();
    $("#movpage").hide();
  }
}

class EndPage extends Page {
    constructor() {
      super("endpg");
    }
  
    play() {
      $("#end-page").show();
      document.getElementById('participant').innerHTML = "Participant ID: " + userID; 
      turtledance("#turtles > img");
      
    }
  
    deactivate() {
      super.deactivate();
    }
  }

  $("#exit").bind("click touch", function() {
    window.alert("Please close this window");
  });

  $("#continue").bind("click touch", function() {
    $("#end-page").hide();
    addSurveyPages();
    globalBook.nextpage();
  });
class ChooseList extends Page {
    constructor() {
      super("chooselist");
    }
  
    play() {
      $("#chooselist").show();
    }
  
    deactivate() {
      var sel = document.getElementById('scripts');
      var choice = sel.options[sel.selectedIndex].value;  
      console.log(choice);   
      if (choice.length == 1) {
        listIndex = choice;
        listIndex = parseInt(listIndex);
      } 
      addPages(listIndex);
      super.deactivate();
      $("#chooselist").hide();
    }
  }

//https://stackoverflow.com/questions/1759987/listening-for-variable-changes-in-javascript


var imagesToLoad = [
"FinalImagesALL/ImgaesforExamples/Boy_1_Solo.png",
"FinalImagesALL/ImgaesforExamples/Boy1_Piano.png",
"FinalImagesALL/ImgaesforExamples/Boy1_Movie.png",
"FinalImagesALL/ImgaesforExamples/Boy1_Paper.png",
"FinalImagesALL/ImgaesforExamples/Boy1_Table.png",
"FinalImagesALL/ImgaesforExamples/Boy2_3_Movie.png",
"FinalImagesALL/ImgaesforExamples/Boy2_3_Table.png",
"FinalImagesALL/ImgaesforExamples/Boy2_3_Paper.png",
"FinalImagesALL/ImgaesforExamples/Boy2_3_Piano.png",
"FinalImagesALL/ImgaesforExamples/Girl1_Movie.png",
"FinalImagesALL/ImgaesforExamples/Girl1_Paper.png",
"FinalImagesALL/ImgaesforExamples/Girl1_Table.png",
"FinalImagesALL/ImgaesforExamples/Girl1_Piano.png",
"FinalImagesALL/ImgaesforExamples/Girl2_3_Movie.png",
"FinalImagesALL/ImgaesforExamples/Girl2_3_Table.png",
"FinalImagesALL/ImgaesforExamples/Girl2_3_Paper.png",
"FinalImagesALL/ImgaesforExamples/Girl2_3_Piano.png",
"FinalImagesALL/Boy2_3_Baseball.jpg",
"FinalImagesALL/Girl1_Baseball.jpg",
"FinalImagesALL/Girl2_3_Baseball.jpg",
"FinalImagesALL/Boy1_Baseball.jpg",
"FinalImagesALL/Boy2_3_Clothes.jpg",
"FinalImagesALL/Girl1_Clothes.jpg",
"FinalImagesALL/Girl2_3_Clothes.jpg",
"FinalImagesALL/Boy1_Clothes.jpg",
"FinalImagesALL/Boy2_3_Bubbles.jpg",
"FinalImagesALL/Girl1_Bubbles.jpg",
"FinalImagesALL/Girl2_3_Bubbles.jpg",
"FinalImagesALL/Boy1_Bubbles.jpg",
"FinalImagesALL/Boy2_3_Floor.jpg",
"FinalImagesALL/Girl1_Floor.jpg",
"FinalImagesALL/Girl2_3_Floor.jpg",
"FinalImagesALL/Boy1_Floor.jpg",
"FinalImagesALL/Boy2_3_Bike.png",
"FinalImagesALL/Girl1_Bike.png",
"FinalImagesALL/Girl2_3_Bike.png",
"FinalImagesALL/Boy1_Bike.png",
"FinalImagesALL/Boy2_3_Cart.png",
"FinalImagesALL/Girl1_Cart.png",
"FinalImagesALL/Girl2_3_Cart.png",
"FinalImagesALL/Boy1_Cart.png",
"FinalImagesALL/Boy2_3_Cat.png",
"FinalImagesALL/Girl1_Cat.png",
"FinalImagesALL/Girl2_3_Cat.png",
"FinalImagesALL/Boy1_Cat.png",
"FinalImagesALL/Boy1_Rabbit.png",
"FinalImagesALL/Girl1_Rabbit.png",
"FinalImagesALL/Girl2_3_Rabbit.png",
"FinalImagesALL/Boy2_3_Rabbit.png",
"FinalImagesALL/Boy1_Frog.jpg",
"FinalImagesALL/Girl1_Frog.jpg",
"FinalImagesALL/Girl2_3_Frog.jpg",
"FinalImagesALL/Boy2_3_Frog.jpg",
"FinalImagesALL/Boy1_Basket.jpg",
"FinalImagesALL/Girl1_Basket.jpg",
"FinalImagesALL/Girl2_3_Basket.jpg",
"FinalImagesALL/Boy2_3_Basket.jpg",
"FinalImagesALL/Boy1_Sandcastle.jpg",
"FinalImagesALL/Girl1_Sandcastle.jpg",
"FinalImagesALL/Girl2_3_Sandcastle.jpg",
"FinalImagesALL/Boy2_3_Sandcastle.jpg",
"FinalImagesALL/Boy1_Wall.jpg",
"FinalImagesALL/Girl1_Wall.jpg",
"FinalImagesALL/Girl2_3_Wall.jpg",
"FinalImagesALL/Boy2_3_Wall.jpg",
"FinalImagesALL/Boy1_Fence.jpg",
"FinalImagesALL/Girl1_Fence.jpg",
"FinalImagesALL/Girl2_3_Fence.jpg",
"FinalImagesALL/Boy2_3_Fence.jpg",
"FinalImagesALL/Boy1_Box.jpg",
"FinalImagesALL/Girl1_Box.jpg",
"FinalImagesALL/Girl2_3_Box.jpg",
"FinalImagesALL/Boy2_3_Box.jpg",
"FinalImagesALL/Girl2_3_Milkshake.jpg",
"FinalImagesALL/Girl1_Milkshake.jpg",
"FinalImagesALL/Boy2_3_Milkshake.jpg",
"FinalImagesALL/Boy1_Milkshake.jpg",
"FinalImagesALL/Girl2_3_Bear.jpg",
"FinalImagesALL/Girl1_Bear.jpg",
"FinalImagesALL/Boy2_3_Bear.jpg",
"FinalImagesALL/Boy1_Bear.jpg",
"FinalImagesALL/Girl2_3_Apples.jpg",
"FinalImagesALL/Girl1_Apples.jpg",
"FinalImagesALL/Boy2_3_Apples.jpg",
"FinalImagesALL/Boy1_Apples.jpg",
"FinalImagesALL/Girl2_3_Flowers.jpg",
"FinalImagesALL/Girl1_Flowers.jpg",
"FinalImagesALL/Boy2_3_Flowers.jpg",
"FinalImagesALL/Boy1_Flowers.jpg",
"FinalImagesALL/Girl2_3_Pizza.jpg",
"FinalImagesALL/Girl1_Pizza.jpg",
"FinalImagesALL/Boy2_3_Pizza.jpg",
"FinalImagesALL/Boy1_Pizza.jpg",
"FinalImagesALL/Girl2_3_Cake.jpg",
"FinalImagesALL/Girl1_Cake.jpg",
"FinalImagesALL/Boy2_3_Cake.jpg",
"FinalImagesALL/Boy1_Cake.jpg",
"FinalImagesALL/Girl2_3_Dog.jpg",
"FinalImagesALL/Girl1_Dog.jpg",
"FinalImagesALL/Boy2_3_Dog.jpg",
"FinalImagesALL/Boy1_Dog.jpg",
"FinalImagesALL/Girl1_Car.jpg",
"FinalImagesALL/Boy2_3_Car.jpg",
"FinalImagesALL/Girl2_3_Car.jpg",
"FinalImagesALL/Boy1_Car.jpg",
"FinalImagesALL/Girl1_Book.jpg",
"FinalImagesALL/Boy2_3_Book.jpg",
"FinalImagesALL/Girl2_3_Book.jpg",
"FinalImagesALL/Boy1_Book.jpg",
"FinalImagesALL/Girl1_Ball.jpg",
"FinalImagesALL/Boy2_3_Ball.jpg",
"FinalImagesALL/Girl2_3_Ball.jpg",
"FinalImagesALL/Boy1_Ball.jpg",
"FinalImagesALL/Girl1_Horse.jpg",
"FinalImagesALL/Boy2_3_Horse.jpg",
"FinalImagesALL/Girl2_3_Horse.jpg",
"FinalImagesALL/Boy1_Horse.jpg",
"FinalImagesALL/Girl1_Wagon.jpg",
"FinalImagesALL/Boy2_3_Wagon.jpg",
"FinalImagesALL/Girl2_3_Wagon.jpg",
"FinalImagesALL/Boy1_Wagon.jpg",
"FinalImagesALL/Girl1_Blanket.jpg",
"FinalImagesALL/Boy2_3_Blanket.jpg",
"FinalImagesALL/Girl2_3_Blanket.jpg",
"FinalImagesALL/Boy1_Blanket.jpg",
"FinalImagesALL/Girl1_Tree.jpg",
"FinalImagesALL/Boy2_3_Tree.jpg",
"FinalImagesALL/Girl2_3_Tree.jpg",
"FinalImagesALL/Boy1_Tree.jpg",
];

//create an object, will allow calling a listener function everytime a new value is set
image_loaded = {
  internal: 0,
  Listener: function(val) {},
  set i(val) {
    this.internal = val;
    this.Listener(val);
  },
  get i() {
    return this.internal;
  },
  registerListener: function(listener) {
    this.Listener = listener;
  }
}
audio_loaded = {
  internal: false,
  Listener: function(val) {},
  set i(val) {
    this.internal = val;
    this.Listener(val);
  },
  get i() {
    return this.internal;
  },
  registerListener: function(listener) {
    this.Listener = listener;
  }
}

image_loaded.registerListener(function(val) {
  if(image_loaded.i == imagesToLoad.length){
      $('#image_loading').html('Image Loading Complete');
  }
});

audio_loaded.registerListener(function(val) {
  if(audio_loaded.i == true){
      $('#audio_loading').html('Audio Loading Complete');
     // $("#done").removeAttr("disabled");
  }
});


var images = new Array();

function preload() {
    for (i = 0; i < imagesToLoad.length; i++) {
        images[i] = new Image();
        images[i].src = imagesToLoad[i];
        images[i].addEventListener("load", function () {image_loaded.i = image_loaded.i + 1;} );
    }
}

function loadImages(){
  $("#preload_button").show();
}

$("#done").bind("click touch", function() {
  $("#preload").hide();
});


$("#preload_button").bind("click touch", function() {
  $("#preload").show();
  $("#preload_button").hide();
  //$("#done").attr("disabled", "disabled");
  preload();
});

$(window).on("load", loadImages);

var audio_likert_clicked = [-1, -1];
function check_audio_clicked() {
  if (audio_likert_clicked[0] != -1 && audio_likert_clicked[1] != -1) {
    $('#audiocontinue').show();
  }
}

var progress_aq = 0;
var total_aq = 0;

$("input[name='likert1']").on("change", function(e) {
  audio_likert_clicked[0] = parseInt(this.value);

  check_audio_clicked();

  return true;
});

$("input[name='likert2']").on("change", function(e) {
  audio_likert_clicked[1] = parseInt(this.value);

  check_audio_clicked();

  return true;
});

function audio_likert_reset() {
  $('#audiolikert1 > li > input')[audio_likert_clicked[0] - 1].checked = false;
  $('#audiolikert2 > li > input')[audio_likert_clicked[1] - 1].checked = false;

  audio_likert_clicked[0] = -1;
  audio_likert_clicked[1] = -1;
}

class AudioQuestionPage extends AudioPage {
  constructor(page, audio) {
    super(page, audio, 50);
    this.clicked = -1;

    total_aq += 1;
  }

  after_audio() {
    $("#audiolikertQ1").show();
    $("#audiolikertQ2").show();

    $('#audiobutton').css({"background-color": "#6caba7",
                           "pointer-events": "auto",
                           "cursor": "pointer"});
  }

  play_me() {
    $('#audiobutton').css({"background-color": "gray",
                           "pointer-events": "none",
                           "cursor": "default"});
    this.splay();
  }

  play() {
    this.splay = super.play;
    $("#prognum").html(Math.round(100*progress_aq/total_aq));
    progress_aq += 1;
    $("#bluebar").css("width", `${Math.round(100*progress_aq/total_aq)}%`);

    $("#audiobutton").bind('click touch', this.play_me.bind(this));

    $("#audiocontinue").bind('click touch', function() {
      survey_log_named(globalBook.pages[globalBook.current_page].pageID + " Q1", audio_likert_clicked[0]);
      survey_log_named(globalBook.pages[globalBook.current_page].pageID + " Q2", audio_likert_clicked[1]);
      globalBook.nextpage();
    });

    $('#audiocontinue').hide()

    $('#audiobutton').css({"background-color": "gray",
                           "pointer-events": "none",
                           "cursor": "default"});

    $("#audiolikertQ1").hide();
    $("#audiolikertQ2").hide();


    $("#audioquestion").show();

    this.setTimeout(this.play_me.bind(this), 500);
  }

  deactivate() {
    audio_likert_reset();

    $("#audiobutton").unbind('click touch');
    $("#audiocontinue").unbind('click touch');
    $("#audioquestion").hide();
  }
}

class EmailPage extends Page {
    constructor() {
      super("email_page");
    }
  
    play() {
      $("#emailpage").show();
    }
  
    deactivate() {
      if (document.getElementById("enter_email").value != document.getElementById("enter_email").defaultValue){
        email = document.getElementById("enter_email").value;
        var dat = [(new Date()).getTime(),
          userID,
          listIndex + 1,
          email,
          -1,
          -1,
          -1, 
          -1,
          -1,
          "",
          "",
          "",
          ""];

          logged_data.push(dat);
      }
      super.deactivate();
      $("#emailpage").hide();
    }
  }
var multi_clicked = -1;
$("#multi").on("change", "li > input", function(e) {
  multi_clicked = parseInt(this.value);

  $('#multinext').show();

  return true;
});

function multichoice_reset() {
  multi_clicked = -1;
}

class MultiChoicePage extends Page {
  constructor(page, promp, choices) {
    super(page);

    this.prompt = promp;

    this.choices = choices;
  }

  play() {
    $("#multibody").html(`<h3>${this.prompt}</h3>`);
    for(var i=0; i<this.choices.length; i++) {
      $("#multi").append(`<li><input type="radio" name="multichoice" value="${i}" /><br /> ${this.choices[i]}</li>`);
    }

    $("#multicontinue").bind('click touch', function() {
      survey_log(multi_clicked);
      globalBook.nextpage();
    });

    $("#multinext").hide();

    $("#multichoice").show();
  }

  deactivate() {
    multichoice_reset();

    $("#multi").empty();

    $("#multicontinue").unbind('click touch');

    $("#multichoice").hide();
  }
}

let dialect_radios = ["dialect_yn", "dialect_how_often", "dialect_friends", "dialect_family"];

class DialectSurveyPage extends Page {
  constructor(page, di_name) {
    super(page);

    this.dialect_name = di_name;
  }

  log() {
    for(var i in dialect_radios) {
      survey_log_named(this.dialect_name+"_"+dialect_radios[i], get_radio(dialect_radios[i]));
    }

    var v = $("#dialect_info").val();

    if (v != "") survey_log_named(this.dialect_name+"_feedback", v);
  }

  clear() {
    for(var i in dialect_radios) {
      clear_radio(dialect_radios[i]);
    }

    $("#dialect_info").val("");
  }

  play() {
    $(".dialectname").html(this.dialect_name);

    $("#dialect").show();
  }

  deactivate() {
    this.log();
    this.clear();
    $("#dialect").hide();
  }
}

function get_radio(radioname) {
  var ret = "";
  $(`input[name='${radioname}']`).each(function() {
    if ($(this).prop("checked")) ret = $(this).attr("value");
  });

  return ret;
}

function get_checkbox(checkboxname) {
  var ret = [];

  $(`input[name='${checkboxname}']`).each(function() {
    if ($(this).prop("checked")) ret.push($(this).attr("value"));
  });

  return ret;
}

function clear_radio(radioname) {
  $(`input[name='${radioname}']`).each(function() {
    $(this).prop("checked", 0)
  });
}

let demog_radios = ["demog_gender", "demog_ethnicity", "demog_year"];
let demog_checkboxes = ["demog_race"];
let demog_text = ["gender_custom", "demog_age", "demog_zip", "demog_university", "demog_countries"];

class DemogSurveyPage extends Page {
  constructor(page) {
    super(page);
  }

  log() {
    for(var i in demog_radios) {
      survey_log_named(demog_radios[i], get_radio(demog_radios[i]));
    }

    for(var i in demog_checkboxes) {
      var values = get_checkbox(demog_checkboxes[i]);
      for (var j in values) {
        survey_log_named(demog_checkboxes[i], values[j]);
      }
    }

    for(var i in demog_text) {
      var v = $(`#${demog_text[i]}`).val();
      if ($(`#${demog_text[i]}`).attr("type") == "number") {
        survey_log_named(demog_text[i], parseInt(v));
      } else {
        survey_log_named(demog_text[i], v);
      }
    }
  }

  clear() {
    for(var i in demog_radios) {
      clear_radio(demog_radios[i]);
    }

    for(var i in demog_checkboxes) {
      clear_radio(demog_checkboxes[i]);
    }

    for(var i in demog_text) {
      var v = $(`#${demog_text[i]}`).val('');
    }
  }

  play() {
    $("#demog").show();
  }

  deactivate() {
    this.log();
    this.clear();
    $("#demog").hide();
  }
}

class WelcomeExperimentPage extends Page {
    constructor() {
      super("welcomeexp");
    }
  
    play() {
      $("#welcomeexp").show();
    }

    deactivate() {
      super.deactivate();
    }
  }

  $("#gotoAdultPage").bind("click touch", function() {
    globalBook.pages.push(new AdultWelcomePage());
    $("#welcomeexp").hide();
    globalBook.nextpage();
  });

  $("#gotoGame").bind("click touch", function() {
    addGamePages();
    $("#welcomeexp").hide();
    globalBook.nextpage();
  });
class WelcomeSurveyPage extends Page {
    constructor() {
      super("welcomesurvey");
    }
  
    play() {
      $("#welcomesurvey").show();
      document.getElementById("enter_email2").value = email;
      document.getElementById("enter_id").value = userID;
         
    }

    deactivate() {
      var email2 = document.getElementById("enter_email2").value;
      console.log(email2);
      userID = parseInt(document.getElementById("enter_id").value);
      survey_log(email2);
      
      $("#welcomesurvey").hide();
      super.deactivate();
    }
  }


class AdultWelcomePage extends Page {
    constructor() {
      super("welcomeadult");
    }
  
    play() {
      $("#welcomeadult").show();
    }

    deactivate() {
      super.deactivate();
    }
  }

  $("#gotoSurvey").bind("click touch", function() {
    addSurveyPages();
    $("#welcomeadult").hide();
    globalBook.nextpage();
  });

  $("#startGame").bind("click touch", function() {
    addGamePages();
    $("#welcomeadult").hide();
    globalBook.nextpage();
  });
class SendDataSurveyPage extends Page {
    constructor() {
      super("send_data_survey");
    }
  
    play() {
      $("#sendsurvey").show();
        export_survey();
      
    }
  
    deactivate() {
      $("#sendsurvey").hide();
      super.deactivate();
    }
  }


class SendDataExpPage extends Page {
    constructor() {
      super("send_data_exp");
    }
  
    play() {
      $("#send").show();
        export_data();
    }
  
    deactivate() {
      $("#send").hide();
      super.deactivate();
    }
  }



// https://www.tutorialspoint.com/pouchdb/pouchdb_synchronizationpn.htm#:~:text=You%20can%20synchronize%20the%20databases,have%20used%20the%20method%20PouchDB.
var db = new PouchDB('ab_study');

/*create CouchDB database (personal cloudant db for testng purposes) */
var remoteCouch = "https://08c3bb2d-aec5-48c2-9972-362ab894e00b-bluemix:c087461717c7e0e15d1592c1505f749fad973517380eb1c36ebe1588922002f9@08c3bb2d-aec5-48c2-9972-362ab894e00b-bluemix.cloudantnosqldb.appdomain.cloud/ab-study";




//implement sync function
function sync(){
  //syncDom.setAttribute('data-sync-state', 'syncing');
  var opts = {live: true, retry: true};
  //two way sync
  db.sync(remoteCouch, opts);
}

//add new data to PouchDB, adds all the logged data for a single game as a new document
function addData(test_data){
  var test = {
      _id: new Date().toISOString(),
      data: test_data,
    };
    db.put(test).then(function(result){
      console.log(result);
    }).catch(function(err){
      console.log(err);
    });
}

if (remoteCouch) {
  sync();
}
class EndSurveyPage extends Page {
    constructor() {
      super("end_survey");
    }
  
    play() {
      $("#end_survey").show();
    }
  
    deactivate() {
      $("#end_survey").hide();
      //super.deactivate();
    }
  }

let lang_radios = ["lang1_proficiency", "lang2_proficiency", "lang3_proficiency"];
let lang_text = ["lang1","lang2","lang3"];

class LangSurveyPage extends Page {
  constructor(page) {
    super(page);
  }

  log() {
    for(var i in lang_radios) {
      survey_log_named(demog_radios[i], get_radio(demog_radios[i]));
    }

    for(var i in lang_text) {
      var v = $(`#${demog_text[i]}`).val();
      if ($(`#${demog_text[i]}`).attr("type") == "number") {
        survey_log_named(demog_text[i], parseInt(v));
      } else {
        survey_log_named(demog_text[i], v);
      }
    }
  }

  clear() {
    for(var i in lang_radios) {
      clear_radio(dialect_radios[i]);
    }

    for(var i in lang_text) {
        $(`#${lang_text[i]}`).val("");
    }

  }

  play() {
    $("#lang").show();
  }

  deactivate() {
    this.log();
    this.clear();
    $("#lang").hide();
  }
}
</script>


    <script src="lists.js"></script> <!-- NOTE FOR RICKY: DELETE THIS WHEN ADDING LIST CODE -->

    <script>
      let userID = 0; // NOTE FOR RICKY: USERID INSERTED HERE
      let listIndex = 0; // NOTE FOR RICKY: LIST INDEX INSERTED HERE
      let list = lists[listIndex]; // NOTE FOR RICKY: CURRENT LIST INSERTED HERE
      let email = "";
    </script>

    <script src="run.js"></script>



  </body>

</html>
